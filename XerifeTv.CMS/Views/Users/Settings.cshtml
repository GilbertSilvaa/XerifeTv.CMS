@using XerifeTv.CMS.Modules.User.Dtos.Response

@model GetUserResponseDto

@{
  ViewData["Title"] = "Configurações";
}

<style>
  .sub-menu-settings 
  {
    min-width: 18%; 
    height: 70vh; 
    border-right: 1px solid #606060;
    
    @@media (max-width: 430px) {
      min-width: 100%;
      height: auto;
      border-right-color: transparent;
      border-bottom: 1px solid #606060;
      padding-bottom: 1rem;
      margin-bottom: 1rem;
    }
  }
</style>

<div class="container">
  <header>
    <div class="d-flex align-items-center justify-content-between gap-4">
      <span class="fs-3 fw-normal">Configurações</span>
    </div>
    <hr />
  </header>

  <div class="d-flex flex-column flex-md-row align-items-start">
    <div 
      class="nav nav-pills me-3 d-flex flex-row flex-md-column gap-2 pe-3 sub-menu-settings" 
      id="v-pills-tab" 
      role="tablist"
      aria-orientation="vertical">
      <button 
        class="nav-link d-flex align-items-center justify-content-start gap-2 ps-4 active" 
        id="v-pills-profile-tab" 
        data-bs-toggle="pill" 
        data-bs-target="#v-pills-profile" 
        type="button" 
        role="tab" 
        aria-controls="v-pills-profile" 
        aria-selected="true"
        href="#updateprofile">
        <i class="fa-solid fa-user"></i>
        <span>Perfil</span>
      </button>

      <button
        class="nav-link d-flex align-items-center justify-content-start gap-2 ps-4"
        id="v-pills-edit-password-tab"
        data-bs-toggle="pill"
        data-bs-target="#v-pills-edit-password"
        type="button"
        role="tab"
        aria-controls="v-pills-edit-password"
        aria-selected="true"
        href="#updatepassword">
        <i class="fa-solid fa-key"></i>
        <span>Alterar Senha</span>
      </button>
    </div>
    <div class="tab-content px-3 py-1 flex-grow-1" id="v-pills-tabContent">
      <div 
        class="tab-pane fade show active" 
        id="v-pills-profile" 
        role="tabpanel" 
        aria-labelledby="v-pills-profile-tab" 
        tabindex="0">
        @await Html.PartialAsync("_ProfileForm", @Model)
      </div>

      <div 
        class="tab-pane fade" 
        id="v-pills-edit-password" 
        role="tabpanel" 
        aria-labelledby="v-pills-edit-password-tab" 
        tabindex="0">
        @await Html.PartialAsync("_UpdatePasswordForm", @Model)
      </div>
    </div>
  </div>
</div>

@section scripts {
    <script>
        $(document).ready(function () {
            const hash = window.location.hash;

            if (hash) {
                const $tab = $(`.nav-link[href="${hash}"]`);

                if ($tab.length) {
                    const tab = new bootstrap.Tab($tab[0]);
                    tab.show();
                }
            }
        });
    </script>
}